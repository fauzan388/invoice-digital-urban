<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URBAN Gaming Invoice Generator + AI</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- html2pdf.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* Custom Styles */
        body { font-family: 'Inter', sans-serif; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        @keyframes fade-in { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fade-in 0.4s ease-out forwards; }
        
        /* Loading Sparkle Animation */
        @keyframes sparkle {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.2); }
            100% { opacity: 1; transform: scale(1); }
        }
        .sparkle-anim { animation: sparkle 1.5s infinite; }
    </style>
</head>
<body class="bg-gray-50 text-slate-800">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;

        // --- KONFIGURASI API KEY ---
        // PENTING: Ganti string kosong di bawah ini dengan API Key Gemini Anda
        // Dapatkan di: https://aistudio.google.com/app/apikey
        const apiKey = "AIzaSyBpWVjSVje-g76J-v2Z0CBJAZrDaODjhRg"; 

        // --- Helper: Panggil Gemini API ---
        const generateWithGemini = async (prompt) => {
            if (!apiKey) {
                alert("Fitur AI belum aktif. Mohon buka file 'index.html' ini dengan text editor (Notepad/VS Code), lalu isi bagian 'const apiKey' dengan API Key Gemini Anda.");
                return null;
            }

            try {
                const response = await fetch(
                    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,
                    {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: prompt }] }]
                        }),
                    }
                );

                if (!response.ok) throw new Error("Gagal menghubungi Gemini");
                const data = await response.json();
                return data.candidates?.[0]?.content?.parts?.[0]?.text || null;
            } catch (error) {
                console.error("Gemini Error:", error);
                alert("Maaf, terjadi kesalahan saat menghubungi AI. Periksa koneksi internet atau API Key Anda.");
                return null;
            }
        };

        // --- Ikon SVG Inline ---
        const IconGamepad = ({size=24}) => (<svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="6" y1="12" x2="10" y2="12"/><line x1="8" y1="10" x2="8" y2="14"/><line x1="15" y1="13" x2="15.01" y2="13"/><line x1="18" y1="11" x2="18.01" y2="11"/><rect x="2" y="6" width="20" height="12" rx="2"/></svg>);
        const IconPackage = ({size=24}) => (<svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M16.5 9.4L7.5 4.21"/><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></svg>);
        const IconWrench = ({size=24}) => (<svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>);
        const IconFileText = ({size=24}) => (<svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>);
        const IconPrinter = ({size=24}) => (<svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="6 9 6 2 18 2 18 9"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><rect x="6" y="14" width="12" height="8"/></svg>);
        const IconX = ({size=24}) => (<svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>);
        const IconShare = ({size=24}) => (<svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg>);
        const IconDownload = ({size=24}) => (<svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>);
        const IconSparkles = ({size=24, className=""}) => (<svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></svg>);

        // --- Main App Component ---
        const App = () => {
            const [activeTab, setActiveTab] = useState(0);

            const tabs = [
                { id: 0, label: 'Invoice SEWA PS', icon: <IconGamepad size={18} /> },
                { id: 1, label: 'Invoice Isi Game', icon: <IconPackage size={18} /> },
                { id: 2, label: 'Invoice Service', icon: <IconWrench size={18} /> },
            ];

            return (
                <div className="min-h-screen pb-12 bg-gray-50/50">
                    {/* Header */}
                    <header className="bg-white shadow-sm sticky top-0 z-20 backdrop-blur-md bg-white/90">
                        <div className="max-w-3xl mx-auto px-4 py-4 text-center">
                        <h1 className="text-xl md:text-2xl font-bold text-indigo-800 tracking-tight">
                            Input Invoice Otomatis
                        </h1>
                        <p className="text-xs font-bold text-indigo-500 uppercase tracking-widest mt-1">
                            URBAN Gaming Lampung
                        </p>
                        </div>
                    </header>

                    {/* Main Content */}
                    <main className="max-w-3xl mx-auto px-4 py-6">
                        {/* Navigation Tabs */}
                        <div className="flex bg-gray-200/80 p-1.5 rounded-xl mb-6 overflow-x-auto no-scrollbar gap-1">
                        {tabs.map((tab) => (
                            <button
                            key={tab.id}
                            onClick={() => setActiveTab(tab.id)}
                            className={`flex-1 flex items-center justify-center gap-2 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all duration-200 whitespace-nowrap
                                ${activeTab === tab.id 
                                ? 'bg-white text-indigo-600 shadow-sm ring-1 ring-black/5 scale-[1.02]' 
                                : 'text-gray-500 hover:text-gray-700 hover:bg-gray-300/50'
                                }`}
                            >
                            {tab.icon}
                            {tab.label}
                            </button>
                        ))}
                        </div>

                        {/* Tab Content */}
                        <div className="bg-white rounded-2xl shadow-lg shadow-indigo-100/50 border border-gray-100 overflow-hidden min-h-[400px]">
                        {activeTab === 0 && <SewaPSForm />}
                        {activeTab === 1 && <EmptyState title="Invoice Isi Game" icon={<IconPackage size={48} />} />}
                        {activeTab === 2 && <EmptyState title="Invoice Service" icon={<IconWrench size={48} />} />}
                        </div>
                    </main>
                </div>
            );
        };

        const SewaPSForm = () => {
            // Form States
            const [rawChat, setRawChat] = useState(`Sewa PS URBAN PlayStation 
Nama Penyewa : Andi Gaming
Jenis PS : PS5 + TV 4K
Lama Sewa : 24 Jam
Antar Jemput : Ya`);
            
            // Extracted/Editable Data States
            const [customerName, setCustomerName] = useState('');
            const [psType, setPsType] = useState('');
            const [duration, setDuration] = useState('');
            const [delivery, setDelivery] = useState('');
            const [price, setPrice] = useState('');
            const [shipping, setShipping] = useState('');
            
            // UI States
            const [showInvoice, setShowInvoice] = useState(false);
            const [isAiLoading, setIsAiLoading] = useState(false);
            const [isMsgLoading, setIsMsgLoading] = useState(false);
            
            const invoiceRef = useRef();

            // Initial parse on load (manual regex fallback)
            useEffect(() => {
                manualParse();
            }, []);

            const manualParse = () => {
                const lines = rawChat.split('\n');
                const findVal = (key) => lines.find(l => l.toLowerCase().includes(key.toLowerCase()))?.split(':')[1]?.trim() || '';
                
                if(!customerName) setCustomerName(findVal('Nama'));
                if(!psType) setPsType(findVal('Jenis'));
                if(!duration) setDuration(findVal('Lama'));
                if(!delivery) setDelivery(findVal('Antar'));
            };

            // --- âœ¨ FITUR AI 1: Ekstraksi Data Cerdas ---
            const handleAiExtract = async () => {
                setIsAiLoading(true);
                const prompt = `
                    Kamu adalah asisten admin rental PS. Ekstrak data berikut dari teks chat pelanggan ini menjadi format JSON.
                    Jika data tidak ditemukan, isi dengan string kosong atau 0.
                    
                    Teks Chat:
                    """${rawChat}"""

                    Format JSON yang diminta:
                    {
                        "nama": "Nama pelanggan",
                        "jenis_ps": "Jenis console (misal PS4/PS5)",
                        "lama": "Durasi sewa (misal 12 jam/1 hari)",
                        "antar_status": "Ya/Tidak (berdasarkan konteks antar jemput)",
                        "harga_sewa": 0 (hanya jika ada angka harga sewa spesifik di chat, jika tidak 0),
                        "ongkir": 0 (hanya jika ada angka ongkir spesifik di chat, jika tidak 0)
                    }
                    Hanya return JSON valid tanpa markdown.
                `;

                const result = await generateWithGemini(prompt);
                
                if (result) {
                    try {
                        // Bersihkan markdown jika ada (kadang gemini nambahin ```json)
                        const cleaned = result.replace(/```json/g, '').replace(/```/g, '').trim();
                        const data = JSON.parse(cleaned);
                        
                        setCustomerName(data.nama || customerName);
                        setPsType(data.jenis_ps || psType);
                        setDuration(data.lama || duration);
                        setDelivery(data.antar_status || delivery);
                        if(data.harga_sewa > 0) setPrice(data.harga_sewa.toString());
                        if(data.ongkir > 0) setShipping(data.ongkir.toString());
                        
                    } catch (e) {
                        console.error("Gagal parse JSON AI", e);
                        alert("Gagal membaca respon AI. Coba lagi.");
                    }
                }
                setIsAiLoading(false);
            };

            const handleGenerate = () => {
                if (!price) {
                    alert("Mohon masukkan harga sewa!");
                    return;
                }
                setShowInvoice(true);
            };

            const handleDownloadPDF = () => {
                if (!window.html2pdf) {
                    alert("Sistem PDF belum siap.");
                    return;
                }
                const element = invoiceRef.current;
                const opt = {
                    margin: 0,
                    filename: `Invoice_${customerName.replace(/\s+/g, '_')}_${Date.now()}.pdf`,
                    image: { type: 'jpeg', quality: 0.98 },
                    html2canvas: { scale: 2, useCORS: true },
                    jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
                };
                window.html2pdf().set(opt).from(element).save();
            };

            // --- âœ¨ FITUR AI 2: Generate Pesan WA ---
            const handleShareWA = async () => {
                setIsMsgLoading(true);
                const total = (parseInt(price) || 0) + (parseInt(shipping) || 0);
                
                // Minta Gemini membuatkan caption
                const prompt = `
                    Buatkan pesan WhatsApp singkat, ramah, dan seru untuk mengirim invoice rental PS.
                    Gunakan Bahasa Indonesia yang gaul tapi sopan. Gunakan banyak emoji gaming.
                    
                    Data:
                    Nama: ${customerName}
                    Unit: ${psType}
                    Durasi: ${duration}
                    Total: Rp ${total.toLocaleString('id-ID')}
                    
                    Pesan harus menyertakan "Berikut adalah invoice Anda" dan rincian total.
                    Jangan pakai subject/judul, langsung isi pesan saja.
                `;

                const aiMessage = await generateWithGemini(prompt);
                
                // Fallback jika AI gagal
                const finalMessage = aiMessage || `Halo Bro ${customerName}! ðŸ‘‹\n\nTerima kasih sudah sewa di URBAN Gaming.\nBerikut invoice untuk unit ${psType} selama ${duration}.\n\nTotal: Rp ${total.toLocaleString('id-ID')}\n\nHappy Gaming! ðŸŽ®`;

                setIsMsgLoading(false);
                window.open(`https://wa.me/?text=${encodeURIComponent(finalMessage)}`, '_blank');
            };

            const totalAmount = (parseInt(price) || 0) + (parseInt(shipping) || 0);

            return (
                <div className="p-6 relative">
                {!showInvoice ? (
                    <div className="space-y-6 animate-fade-in">
                        {/* Area Input Chat & AI Button */}
                        <div className="space-y-3 bg-indigo-50/50 p-4 rounded-xl border border-indigo-100">
                            <div className="flex justify-between items-center">
                                <label className="text-sm font-bold text-indigo-900 flex items-center gap-2">
                                    <IconFileText size={16} />
                                    Paste Chat Customer
                                </label>
                                <button 
                                    onClick={handleAiExtract}
                                    disabled={isAiLoading}
                                    className={`text-xs px-3 py-1.5 rounded-full font-semibold flex items-center gap-1.5 transition-all
                                        ${isAiLoading 
                                            ? 'bg-gray-300 text-gray-500 cursor-wait' 
                                            : 'bg-gradient-to-r from-indigo-500 to-purple-600 text-white hover:shadow-md hover:scale-105 active:scale-95'
                                        }`}
                                >
                                    <IconSparkles size={14} className={isAiLoading ? "sparkle-anim" : ""} />
                                    {isAiLoading ? "Sedang Membaca..." : "Auto-Isi AI"}
                                </button>
                            </div>
                            <textarea
                                value={rawChat}
                                onChange={(e) => setRawChat(e.target.value)}
                                className="w-full p-3 text-sm border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 bg-white h-24 font-mono leading-relaxed resize-none text-gray-600"
                                placeholder="Paste chat disini..."
                            />
                            <p className="text-[10px] text-gray-400 text-right italic">
                                *Tips: Klik Auto-Isi AI untuk mengisi form di bawah secara otomatis
                            </p>
                        </div>

                        {/* Form Input Manual / Hasil AI */}
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4">
                            {/* Data Customer */}
                            <div className="col-span-1 md:col-span-2">
                                <h3 className="text-xs font-bold text-gray-400 uppercase tracking-wider mb-3">Data Penyewa</h3>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label className="text-xs font-semibold text-gray-600 mb-1 block">Nama Pelanggan</label>
                                        <input type="text" value={customerName} onChange={(e)=>setCustomerName(e.target.value)} className="w-full p-2.5 rounded-lg border border-gray-300 text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 font-medium" />
                                    </div>
                                    <div>
                                        <label className="text-xs font-semibold text-gray-600 mb-1 block">Durasi Sewa</label>
                                        <input type="text" value={duration} onChange={(e)=>setDuration(e.target.value)} className="w-full p-2.5 rounded-lg border border-gray-300 text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500" />
                                    </div>
                                </div>
                            </div>

                            {/* Detail Unit & Layanan */}
                            <div className="bg-white p-4 rounded-xl border border-gray-200 shadow-sm space-y-3">
                                <h3 className="text-sm font-bold text-gray-800 border-b pb-2 flex items-center gap-2">
                                    <IconGamepad size={16} className="text-indigo-500"/> Unit & Layanan
                                </h3>
                                <div>
                                    <label className="text-xs text-gray-500 mb-1 block">Jenis Console</label>
                                    <input type="text" value={psType} onChange={(e)=>setPsType(e.target.value)} className="w-full p-2 rounded border border-gray-300 text-sm" placeholder="Ex: PS4 Pro" />
                                </div>
                                <div>
                                    <label className="text-xs text-gray-500 mb-1 block">Antar / Jemput</label>
                                    <input type="text" value={delivery} onChange={(e)=>setDelivery(e.target.value)} className="w-full p-2 rounded border border-gray-300 text-sm" placeholder="Ya / Tidak" />
                                </div>
                            </div>

                            {/* Detail Biaya */}
                            <div className="bg-white p-4 rounded-xl border border-gray-200 shadow-sm space-y-3">
                                <h3 className="text-sm font-bold text-gray-800 border-b pb-2 flex items-center gap-2">
                                    <IconPackage size={16} className="text-green-500"/> Rincian Biaya
                                </h3>
                                <div>
                                    <label className="text-xs text-gray-500 mb-1 block">Harga Sewa (Rp)</label>
                                    <input type="number" value={price} onChange={(e)=>setPrice(e.target.value)} className="w-full p-2 rounded border border-gray-300 text-sm font-bold text-gray-800" placeholder="0" />
                                </div>
                                <div>
                                    <label className="text-xs text-gray-500 mb-1 block">Ongkos Kirim (Rp)</label>
                                    <input type="number" value={shipping} onChange={(e)=>setShipping(e.target.value)} className="w-full p-2 rounded border border-gray-300 text-sm" placeholder="0" />
                                </div>
                            </div>
                        </div>

                        {/* Action Button */}
                        <button
                            onClick={handleGenerate}
                            className="w-full py-3.5 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl shadow-lg shadow-indigo-200 hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200 flex items-center justify-center gap-2 mt-4"
                        >
                            <IconPrinter size={20} />
                            Buat Invoice
                        </button>
                    </div>
                ) : (
                    <div className="animate-fade-in">
                    {/* Invoice Actions */}
                    <div className="flex gap-2 mb-6 justify-between items-center bg-gray-100 p-2 rounded-lg">
                        <button 
                            onClick={() => setShowInvoice(false)}
                            className="p-2 text-gray-500 hover:bg-white hover:text-red-500 rounded-lg transition-colors"
                            title="Edit Kembali"
                        >
                            <IconX size={20} />
                        </button>
                        <div className="flex gap-2">
                            <button 
                                onClick={handleShareWA}
                                disabled={isMsgLoading}
                                className={`px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 text-white transition-all
                                    ${isMsgLoading 
                                        ? 'bg-green-400 cursor-wait' 
                                        : 'bg-green-600 hover:bg-green-700 shadow-md hover:shadow-lg'}`}
                            >
                                <IconSparkles size={16} className={isMsgLoading ? "animate-spin" : ""} /> 
                                {isMsgLoading ? "Membuat Pesan..." : "Share WA (AI)"}
                            </button>
                            <button 
                                onClick={handleDownloadPDF}
                                className="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium flex items-center gap-2 shadow-md hover:shadow-lg transition-all"
                            >
                                <IconDownload size={16} /> PDF
                            </button>
                        </div>
                    </div>

                    {/* INVOICE PREVIEW AREA */}
                    <div className="border shadow-2xl rounded-sm overflow-hidden bg-white mx-auto max-w-[210mm] min-h-[297mm] md:min-h-0 md:h-auto" ref={invoiceRef}>
                        {/* Header Invoice */}
                        <div className="bg-indigo-900 text-white p-8 flex justify-between items-start">
                            <div>
                            <h2 className="text-3xl font-extrabold tracking-wide">INVOICE</h2>
                            <p className="text-indigo-200 text-sm mt-1">#{Date.now().toString().slice(-6)}</p>
                            </div>
                            <div className="text-right flex flex-col items-end">
                            <img 
                                src="logo.png" 
                                alt="URBAN Gaming Logo" 
                                className="h-16 mb-2 object-contain bg-white rounded-lg p-1"
                                crossorigin="anonymous" 
                            />
                            <h3 className="font-bold text-lg">URBAN Gaming Lampung</h3>
                            <p className="text-indigo-200 text-xs mt-1">Rental PlayStation & Service</p>
                            <p className="text-indigo-200 text-xs">Lampung, Indonesia</p>
                            </div>
                        </div>

                        {/* Customer Info */}
                        <div className="p-8">
                            <div className="flex flex-col md:flex-row justify-between mb-8 text-sm">
                            <div className="mb-4 md:mb-0">
                                <p className="text-gray-500 font-medium uppercase text-xs mb-1">Ditagihkan Kepada:</p>
                                <p className="font-bold text-lg text-gray-800">{customerName || '-'}</p>
                                <p className="text-gray-600">Durasi: {duration || '-'}</p>
                                <p className="text-gray-600">Layanan Antar: {delivery || '-'}</p>
                            </div>
                            <div className="text-right">
                                <p className="text-gray-500 font-medium uppercase text-xs mb-1">Tanggal:</p>
                                <p className="font-bold text-gray-800">{new Date().toLocaleDateString('id-ID', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</p>
                            </div>
                            </div>

                            {/* Table */}
                            <div className="mt-8">
                            <table className="w-full text-left border-collapse">
                                <thead>
                                <tr>
                                    <th className="py-3 px-4 bg-gray-50 font-bold uppercase text-xs text-gray-500 border-b border-gray-200">Deskripsi</th>
                                    <th className="py-3 px-4 bg-gray-50 font-bold uppercase text-xs text-gray-500 border-b border-gray-200 text-right">Harga</th>
                                </tr>
                                </thead>
                                <tbody className="text-sm">
                                <tr>
                                    <td className="py-4 px-4 border-b border-gray-100">
                                    <p className="font-bold text-gray-800">Sewa Unit Console</p>
                                    <p className="text-gray-500 text-xs mt-1">{psType || '-'}</p>
                                    </td>
                                    <td className="py-4 px-4 border-b border-gray-100 text-right font-medium">
                                    Rp {parseInt(price).toLocaleString('id-ID')}
                                    </td>
                                </tr>
                                {parseInt(shipping) > 0 && (
                                    <tr>
                                    <td className="py-4 px-4 border-b border-gray-100">
                                        <p className="font-bold text-gray-800">Biaya Pengiriman</p>
                                        <p className="text-gray-500 text-xs mt-1">Ongkos Kirim / Antar Jemput</p>
                                    </td>
                                    <td className="py-4 px-4 border-b border-gray-100 text-right font-medium">
                                        Rp {parseInt(shipping).toLocaleString('id-ID')}
                                    </td>
                                    </tr>
                                )}
                                </tbody>
                                <tfoot>
                                <tr>
                                    <td className="py-4 px-4 text-right font-bold text-gray-600">Total Tagihan</td>
                                    <td className="py-4 px-4 text-right font-bold text-xl text-indigo-600">
                                    Rp {totalAmount.toLocaleString('id-ID')}
                                    </td>
                                </tr>
                                </tfoot>
                            </table>
                            </div>

                            {/* Terms */}
                            <div className="mt-12 bg-indigo-50 p-4 rounded-lg border border-indigo-100">
                            <h4 className="font-bold text-indigo-800 text-sm mb-2 flex items-center gap-2">
                                <IconFileText size={14}/> Syarat & Ketentuan
                            </h4>
                            <p className="text-xs text-indigo-700 leading-relaxed">
                                1. Siapkan <strong>KTP + SIM/STNK</strong> asli untuk syarat jaminan.<br/>
                                2. Kerusakan unit selama masa sewa menjadi tanggung jawab penyewa.<br/>
                                3. Keterlambatan pengembalian akan dikenakan denda sesuai ketentuan.
                            </p>
                            </div>

                            <div className="mt-8 text-center">
                            <p className="text-xs text-gray-400">Terima kasih telah bermain bersama URBAN Gaming Lampung ðŸŽ®</p>
                            </div>
                        </div>
                    </div>
                    </div>
                )}
                </div>
            );
        };

        const EmptyState = ({ title, icon }) => (
            <div className="flex flex-col items-center justify-center h-80 text-gray-400 p-6 text-center animate-fade-in">
                <div className="bg-gray-100 p-4 rounded-full mb-4 text-gray-500">
                {icon}
                </div>
                <h3 className="text-lg font-medium text-gray-600">{title}</h3>
                <p className="text-sm mt-2 max-w-xs">Fitur ini belum tersedia. Silahkan gunakan menu Invoice Sewa PS.</p>
            </div>
        );

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>